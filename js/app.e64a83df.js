(function(e){function t(t){for(var o,c,i=t[0],u=t[1],l=t[2],p=0,d=[];p<i.length;p++)c=i[p],Object.prototype.hasOwnProperty.call(r,c)&&r[c]&&d.push(r[c][0]),r[c]=0;for(o in u)Object.prototype.hasOwnProperty.call(u,o)&&(e[o]=u[o]);s&&s(t);while(d.length)d.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],o=!0,i=1;i<n.length;i++){var u=n[i];0!==r[u]&&(o=!1)}o&&(a.splice(t--,1),e=c(c.s=n[0]))}return e}var o={},r={app:0},a=[];function c(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,c),n.l=!0,n.exports}c.m=e,c.c=o,c.d=function(e,t,n){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(c.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)c.d(n,o,function(t){return e[t]}.bind(null,o));return n},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/";var i=window["webpackJsonp"]=window["webpackJsonp"]||[],u=i.push.bind(i);i.push=t,i=i.slice();for(var l=0;l<i.length;l++)t(i[l]);var s=u;a.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("7a23"),r={id:"nav"},a=Object(o["g"])("Home"),c=Object(o["f"])("br",null,null,-1),i=Object(o["g"])("Login"),u=Object(o["f"])("br",null,null,-1),l=Object(o["g"])("UserRegistration"),s=Object(o["f"])("br",null,null,-1),p=Object(o["g"])("User"),d=Object(o["f"])("br",null,null,-1),f=Object(o["g"])("DefaultMap"),b=Object(o["f"])("br",null,null,-1),m=Object(o["g"])("AnalyticsDashboard");function h(e,t){var n=Object(o["w"])("router-link"),h=Object(o["w"])("router-view");return Object(o["q"])(),Object(o["e"])(o["a"],null,[Object(o["f"])("div",r,[Object(o["h"])(n,{to:"/"},{default:Object(o["C"])((function(){return[a]})),_:1}),c,Object(o["h"])(n,{to:"/login"},{default:Object(o["C"])((function(){return[i]})),_:1}),u,Object(o["h"])(n,{to:"/UserRegistration"},{default:Object(o["C"])((function(){return[l]})),_:1}),s,Object(o["h"])(n,{to:"/User"},{default:Object(o["C"])((function(){return[p]})),_:1}),d,Object(o["h"])(n,{to:"/Map"},{default:Object(o["C"])((function(){return[f]})),_:1}),b,Object(o["h"])(n,{to:"/Analytics"},{default:Object(o["C"])((function(){return[m]})),_:1})]),Object(o["h"])(h)],64)}n("c4d1");var g=n("6b0d"),y=n.n(g);const O={},j=y()(O,[["render",h]]);var v=j,L=n("6c02"),k={class:"hello"};function w(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])("div",k,[Object(o["f"])("h1",null,Object(o["y"])(n.msg),1)])}var S={name:"HelloWorld",props:{msg:String}};n("ffd7");const C=y()(S,[["render",w],["__scopeId","data-v-43f48a4c"]]);var R=C,M={name:"Home",components:{HelloWorld:R}};const T=M;var x=T,A={id:"app"},P=Object(o["f"])("h1",null,"Sign In",-1),_={class:"form-group"};function U(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])("div",A,[P,Object(o["f"])("form",_,[Object(o["D"])(Object(o["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.userLogin=t}),type:"text",class:"form-control",placeholder:"Username",required:""},null,512),[[o["A"],e.userLogin]]),Object(o["D"])(Object(o["f"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.emailLogin=t}),type:"text",class:"form-control",placeholder:"Email",required:""},null,512),[[o["A"],e.emailLogin]]),Object(o["f"])("input",{type:"submit",class:"btn btn-primary",onClick:t[2]||(t[2]=function(){return c.doLogin&&c.doLogin.apply(c,arguments)})})])])}n("e9c4");var I=n("bc3a"),E=n.n(I),B={el:"#app",name:"Home",methods:{doLogin:function(){void 0!==this.userLogin&&void 0!==this.emailLogin&&E.a.post("https://backendsaferideapi.azure-api.net/overlayAPI/api/login",{UserName:this.userLogin,Email:this.emailLogin,Role:"Admin",Valid:!0},{withCredentials:!0}).then((function(e){var t=e.data.token;localStorage.setItem("token",JSON.stringify(t)),console.log(e),window.alert("login success with token = "+localStorage.getItem("token"))})).catch((function(e){console.log(e),window.alert("Login error")}))}}};const D=y()(B,[["render",U]]);var H=D,q={key:0},V=Object(o["f"])("a",{href:"#"},"Home ",-1),N=Object(o["f"])("a",{href:"#"},"AddRoute ",-1),F={key:1};function z(e,t,n,r,a,c){return e.loggedIn?(Object(o["q"])(),Object(o["e"])("h1",q,[V,N,Object(o["f"])("a",{onClick:t[0]||(t[0]=function(){return c.logout&&c.logout.apply(c,arguments)}),href:"#"},"LogOut")])):(Object(o["q"])(),Object(o["e"])("h1",F," not logged in, "+Object(o["y"])(e.loggedIn),1))}var J=n("1da1");n("96cf");function G(){return W.apply(this,arguments)}function W(){return W=Object(J["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t=!1,E.a.defaults.headers.common.Authorization=localStorage.getItem("token"),e.next=4,E.a.post("https://backendsaferideapi.azure-api.net/api/getToken").then((function(){t=!0})).catch((function(){}));case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),W.apply(this,arguments)}var Z={data:function(){return{loggedIn:!1}},created:function(){var e=this;G().then((function(t){e.loggedIn=t}))},name:"UserProtected",methods:{logout:function(){localStorage.clear(),this.$router.push({name:"Login"})}}};const K=y()(Z,[["render",z]]);var Q=K,X={class:"UserRegistration"},Y=Object(o["f"])("h1",null,"Registration",-1),$=Object(o["f"])("p",null,"Enter desired Username, Email, and passphrase",-1),ee={class:"form-group"};function te(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])("div",X,[Y,$,Object(o["f"])("form",ee,[Object(o["D"])(Object(o["f"])("input",{"onUpdate:modelValue":t[0]||(t[0]=function(t){return e.userName=t}),type:"text",class:"form-control",placeholder:"Username",required:""},null,512),[[o["A"],e.userName]]),Object(o["D"])(Object(o["f"])("input",{"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.userEmail=t}),type:"text",class:"form-control",placeholder:"Email Address",required:""},null,512),[[o["A"],e.userEmail]]),Object(o["D"])(Object(o["f"])("input",{"onUpdate:modelValue":t[2]||(t[2]=function(t){return e.userOTP=t}),type:"text",class:"form-control",placeholder:"Passphrase",required:""},null,512),[[o["A"],e.userOTP]]),Object(o["f"])("input",{type:"submit",class:"btn btn-primary",onClick:t[3]||(t[3]=function(){return c.doRegistration&&c.doRegistration.apply(c,arguments)})})])])}var ne={el:"app",name:"Home",methods:{doRegistration:function(){void 0!==this.userName&&void 0!==this.userEmail&&void 0!==this.userOTP&&E.a.post("https://backendsaferideapi.azure-api.net/user/CreateUser",{Username:this.userName,Email:this.userEmail,Passphrase:this.userTOP,Role:"User",Valid:!0}).then((function(e){console.log(e),window.alert("Email confirmation pending")})).catch((function(e){console.log(e),window.alert("Account creation error. Retry again or contact system administrator")}))}}};const oe=y()(ne,[["render",te]]);var re=oe;function ae(e,t,n,r,a,c){var i=Object(o["w"])("MainMap");return Object(o["q"])(),Object(o["d"])(i,{api_key:"pk.eyJ1IjoiYXBwbGVmdSIsImEiOiJja3p5dWV1eTkwM3gyM2lteGZqZGszNTBjIn0.CLc4mochtSCflbpW9BPH4Q"})}var ce=function(e){return Object(o["t"])("data-v-4c41863f"),e=e(),Object(o["r"])(),e},ie=ce((function(){return Object(o["f"])("div",null,[Object(o["f"])("div",{id:"map",class:"map"}),Object(o["f"])("div",{id:"instructions",class:"instructions"})],-1)}));function ue(e,t,n,r,a,c){var i=Object(o["w"])("MapHeader"),u=Object(o["w"])("MapSearchRectangle");return Object(o["q"])(),Object(o["e"])(o["a"],null,[Object(o["h"])(i),Object(o["h"])(u,{id:"MapSearchRec"}),ie],64)}var le=n("b85c"),se=(n("d81d"),n("d3b7"),n("159b"),n("b64b"),n("99af"),{id:"mapSearchBox"}),pe=Object(o["f"])("input",{type:"text",id:"startLocation",placeholder:"Start Location"},null,-1),de=Object(o["f"])("br",null,null,-1),fe=Object(o["f"])("br",null,null,-1),be=Object(o["f"])("input",{type:"submit",hidden:""},null,-1);function me(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])("div",se,[Object(o["f"])("form",null,[pe,de,Object(o["f"])("input",{onKeyup:t[0]||(t[0]=Object(o["E"])((function(){return c.onSearchEnter&&c.onSearchEnter.apply(c,arguments)}),["enter"])),type:"text",id:"destinationLocation",placeholder:"Destination Location"},null,32),fe,be])])}var he={name:"MapSearchRectangle",methods:{onSearchEnter:function(){}}};const ge=y()(he,[["render",me]]);var ye=ge,Oe={id:"mapHeader"};function je(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])("div",Oe,[Object(o["f"])("button",{id:"homeButton",onClick:t[0]||(t[0]=function(){return c.doHomeButtonClick&&c.doHomeButtonClick.apply(c,arguments)})},"Home Button"),Object(o["f"])("button",{id:"savedRoutesButton",onClick:t[1]||(t[1]=function(){return c.doSavedRoutesButtonClick&&c.doSavedRoutesButtonClick.apply(c,arguments)})},"Saved Routes"),Object(o["f"])("button",{id:"accountButton",onClick:t[2]||(t[2]=function(){return c.doAccountButtonClick&&c.doAccountButtonClick.apply(c,arguments)})},"Account")])}var ve={name:"MapHeader",methods:{doHomeButtonClick:function(){},doSavedRoutesButtonClick:function(){},doAccountButtonClick:function(){}}};n("6897");const Le=y()(ve,[["render",je],["__scopeId","data-v-90d776ea"]]);var ke=Le,we=(n("ac6d"),n("e192")),Se=n.n(we),Ce=(n("c307"),{components:{MapSearchRectangle:ye,MapHeader:ke},data:function(){return{}},methods:{removeOverlays:function(){this.map.getLayer("userLayer")&&this.map.removeLayer("userLayer"),this.map.getLayer("outline")&&this.map.removeLayer("outline"),this.map.getSource("userLayer")&&this.map.removeSource("userLayer")},changeOverlayColor:function(e){this.map.getLayer("userLayer").paint={"fill-color":e}},addOverlays:function(e){var t=[];e.overlayStructure.forEach((function(e){t.push([e.longPoint,e.latPoint])})),this.map.addSource("userLayer",{type:"geojson",data:{type:"Feature",geometry:{type:"Polygon",coordinates:[t]}}}),this.map.addLayer({id:"userLayer",type:"fill",source:"userLayer",layout:{},paint:{"fill-color":e.overlayColor,"fill-opacity":.5}}),this.map.addLayer({id:"outline",type:"line",source:"userLayer",layout:{},paint:{"line-color":"#000","line-width":3}})},onReceiveOverlay:function(e){"None"!==e?(this.removeOverlays(),this.addOverlays(e)):this.removeOverlays()},onOverlayColorChange:function(e){"Default"!==e&&this.changeOverlayColor(e)}},props:["api_key"],mounted:function(){Se.a.accessToken=this.api_key;var e=new Se.a.Map({container:"map",style:"mapbox://styles/mapbox/streets-v11",center:[-118.1141,33.7838],zoom:14}),t=[-118.1141,33.7838];function n(e){return o.apply(this,arguments)}function o(){return o=Object(J["a"])(regeneratorRuntime.mark((function n(o){var r,a,c,i,u,l,s,p,d,f,b;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,fetch("https://api.mapbox.com/directions/v5/mapbox/cycling/".concat(t[0],",").concat(t[1],";").concat(o[0],",").concat(o[1],"?steps=true&geometries=geojson&access_token=").concat(Se.a.accessToken),{method:"GET"});case 2:return r=n.sent,n.next=5,r.json();case 5:a=n.sent,c=a.routes[0],i=c.geometry.coordinates,u={type:"Feature",properties:{},geometry:{type:"LineString",coordinates:i}},e.getSource("route")?e.getSource("route").setData(u):e.addLayer({id:"route",type:"line",source:{type:"geojson",data:u},layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#3887be","line-width":5,"line-opacity":.75}}),l=document.getElementById("instructions"),s=c.legs[0].steps,p="",d=Object(le["a"])(s);try{for(d.s();!(f=d.n()).done;)b=f.value,p+="<li>".concat(b.maneuver.instruction,"</li>")}catch(m){d.e(m)}finally{d.f()}l.innerHTML="<p><strong>Trip duration: ".concat(Math.floor(c.duration/60)," min ðŸš´ </strong></p><ol>").concat(p,"</ol>");case 16:case"end":return n.stop()}}),n)}))),o.apply(this,arguments)}e.on("load",(function(){n(t),e.addLayer({id:"point",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:t}}]}},paint:{"circle-radius":10,"circle-color":"#3887be"}}),e.on("click",(function(t){var o=Object.keys(t.lngLat).map((function(e){return t.lngLat[e]})),r={type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:o}}]};e.getLayer("end")?e.getSource("end").setData(r):e.addLayer({id:"end",type:"circle",source:{type:"geojson",data:{type:"FeatureCollection",features:[{type:"Feature",properties:{},geometry:{type:"Point",coordinates:o}}]}},paint:{"circle-radius":10,"circle-color":"#f30"}}),n(o)}))}))}});n("5b95");const Re=y()(Ce,[["render",ue],["__scopeId","data-v-4c41863f"]]);var Me=Re,Te={components:{MainMap:Me},name:"LoggedInInitialView",created:function(){E.a.defaults.headers.common.Authorization=localStorage.getItem("token")}};const xe=y()(Te,[["render",ae]]);var Ae=xe,Pe=Object(o["f"])("h1",null,"Retrieve Data",-1),_e={class:"form-group"},Ue=Object(o["f"])("h1",null,"Top Five Views of All Time",-1),Ie=Object(o["f"])("h1",null," Top 5 Longest Views of All Time",-1),Ee=Object(o["f"])("h1",null," Number of Logins daily for the last three months",-1),Be=Object(o["f"])("h1",null,"Number of Registrations daily for last three months",-1);function De(e,t,n,r,a,c){return Object(o["q"])(),Object(o["e"])(o["a"],null,[Object(o["f"])("div",null,[Pe,Object(o["f"])("form",_e,[Object(o["f"])("input",{type:"submit",class:"btn btn-primary",onClick:t[0]||(t[0]=function(){return c.getData&&c.getData.apply(c,arguments)})})])]),Object(o["f"])("div",null,[Ue,Object(o["g"])(" "+Object(o["y"])(e.topViews)+" ",1),Ie,Object(o["g"])(" "+Object(o["y"])(e.topDurations)+" ",1),Ee,Object(o["g"])(" "+Object(o["y"])(e.lastThreeMonthLogins)+" ",1),Be,Object(o["g"])(" "+Object(o["y"])(e.lastThreeMonthRegistrations),1)])],64)}var He={el:"#app",name:"Analytics",methods:{getData:function(){var e=this;E.a.get("https://localhost:5001/api/analytics/topViews").then((function(t){return e.topViews=t.data})),E.a.get("https://localhost:5001/api/analytics/topDurations").then((function(t){return e.topDurations=t.data})),E.a.get("https://localhost:5001/api/analytics/lastThreeMonthLogins").then((function(t){return e.lastThreeMonthLogins=t.data})),E.a.get("https://localhost:5001/api/analytics/lastThreeMonthRegistrations").then((function(t){return e.lastThreeMonthRegistrations=t.data}))}}};const qe=y()(He,[["render",De]]);var Ve=qe,Ne=[{path:"/",name:"Home",component:x},{path:"/login",name:"Login",component:H},{path:"/UserRegistration",name:"UserRegistration",component:re},{path:"/user",name:"User",component:Q},{path:"/map",name:"Map",component:Ae},{path:"/analytics",name:"Analytics",component:Ve}],Fe=Object(L["a"])({history:Object(L["b"])(),routes:Ne}),ze=Fe,Je=n("5502"),Ge=Object(Je["a"])({state:{},mutations:{},actions:{},modules:{}});Object(o["c"])(v).use(Ge).use(ze).mount("#app")},"5b95":function(e,t,n){"use strict";n("8cb3")},6847:function(e,t,n){},6897:function(e,t,n){"use strict";n("7311")},7311:function(e,t,n){},"8cb3":function(e,t,n){},c4d1:function(e,t,n){"use strict";n("6847")},f540:function(e,t,n){},ffd7:function(e,t,n){"use strict";n("f540")}});
//# sourceMappingURL=app.e64a83df.js.map